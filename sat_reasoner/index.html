
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../reasoner/">
      
      
        <link rel="next" href="../diff_reasoner/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.2, mkdocs-material-9.2.8">
    
    
      
        <title>SAT Reasoner - AI Planning Research Project</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.046329b4.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../stylesheets/extra_style.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#src.solver.reasoners.sat_reasoner.SATReasoner" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="AI Planning Research Project" class="md-header__button md-logo" aria-label="AI Planning Research Project" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            AI Planning Research Project
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              SAT Reasoner
            
          </span>
        </div>
      </div>
    </div>
    
    
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="AI Planning Research Project" class="md-nav__button md-logo" aria-label="AI Planning Research Project" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    AI Planning Research Project
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../cdcl_example/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Example CDCL search
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Reference
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../fundamentals/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Fundamentals
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../constraint_expressions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Constraint Expressions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" checked>
        
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Solver
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            Solver
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../common/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Common
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../solver_state/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Solver State
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../solver/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Solver Main Class
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3_4" checked>
        
          <label class="md-nav__link" for="__nav_4_3_4" id="__nav_4_3_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Reasoners
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_3_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_3_4">
            <span class="md-nav__icon md-icon"></span>
            Reasoners
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../reasoner/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Reasoner
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    SAT Reasoner
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    SAT Reasoner
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#src.solver.reasoners.sat_reasoner.SATReasoner" class="md-nav__link">
    SATReasoner
  </a>
  
    <nav class="md-nav" aria-label="SATReasoner">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.solver.reasoners.sat_reasoner.SATReasoner.clauses_database" class="md-nav__link">
    clauses_database
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.solver.reasoners.sat_reasoner.SATReasoner.locked_clauses" class="md-nav__link">
    locked_clauses
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.solver.reasoners.sat_reasoner.SATReasoner.locked_clauses_trail" class="md-nav__link">
    locked_clauses_trail
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.solver.reasoners.sat_reasoner.SATReasoner.watches" class="md-nav__link">
    watches
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.solver.reasoners.sat_reasoner.SATReasoner.pending_clauses_info" class="md-nav__link">
    pending_clauses_info
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.solver.reasoners.sat_reasoner.SATReasoner.next_solver_event_to_process_index" class="md-nav__link">
    next_solver_event_to_process_index
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.solver.reasoners.sat_reasoner.SATReasoner.ClauseId" class="md-nav__link">
    ClauseId
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.solver.reasoners.sat_reasoner.SATReasoner.Clause" class="md-nav__link">
    Clause
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.solver.reasoners.sat_reasoner.SATReasoner.add_new_fixed_scoped_clause" class="md-nav__link">
    add_new_fixed_scoped_clause()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.solver.reasoners.sat_reasoner.SATReasoner.add_new_learned_non_scoped_clause" class="md-nav__link">
    add_new_learned_non_scoped_clause()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.solver.reasoners.sat_reasoner.SATReasoner.on_solver_increment_decision_level_by_one" class="md-nav__link">
    on_solver_increment_decision_level_by_one()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.solver.reasoners.sat_reasoner.SATReasoner.on_solver_backtrack_one_decision_level" class="md-nav__link">
    on_solver_backtrack_one_decision_level()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.solver.reasoners.sat_reasoner.SATReasoner.propagate" class="md-nav__link">
    propagate()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.solver.reasoners.sat_reasoner.SATReasoner.explain" class="md-nav__link">
    explain()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../diff_reasoner/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Difference Logic Reasoner
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3_5" >
        
          <label class="md-nav__link" for="__nav_4_3_5" id="__nav_4_3_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Branchers
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_3_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3_5">
            <span class="md-nav__icon md-icon"></span>
            Branchers
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../brancher/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Brancher
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#src.solver.reasoners.sat_reasoner.SATReasoner" class="md-nav__link">
    SATReasoner
  </a>
  
    <nav class="md-nav" aria-label="SATReasoner">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#src.solver.reasoners.sat_reasoner.SATReasoner.clauses_database" class="md-nav__link">
    clauses_database
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.solver.reasoners.sat_reasoner.SATReasoner.locked_clauses" class="md-nav__link">
    locked_clauses
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.solver.reasoners.sat_reasoner.SATReasoner.locked_clauses_trail" class="md-nav__link">
    locked_clauses_trail
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.solver.reasoners.sat_reasoner.SATReasoner.watches" class="md-nav__link">
    watches
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.solver.reasoners.sat_reasoner.SATReasoner.pending_clauses_info" class="md-nav__link">
    pending_clauses_info
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.solver.reasoners.sat_reasoner.SATReasoner.next_solver_event_to_process_index" class="md-nav__link">
    next_solver_event_to_process_index
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.solver.reasoners.sat_reasoner.SATReasoner.ClauseId" class="md-nav__link">
    ClauseId
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.solver.reasoners.sat_reasoner.SATReasoner.Clause" class="md-nav__link">
    Clause
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.solver.reasoners.sat_reasoner.SATReasoner.add_new_fixed_scoped_clause" class="md-nav__link">
    add_new_fixed_scoped_clause()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.solver.reasoners.sat_reasoner.SATReasoner.add_new_learned_non_scoped_clause" class="md-nav__link">
    add_new_learned_non_scoped_clause()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.solver.reasoners.sat_reasoner.SATReasoner.on_solver_increment_decision_level_by_one" class="md-nav__link">
    on_solver_increment_decision_level_by_one()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.solver.reasoners.sat_reasoner.SATReasoner.on_solver_backtrack_one_decision_level" class="md-nav__link">
    on_solver_backtrack_one_decision_level()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.solver.reasoners.sat_reasoner.SATReasoner.propagate" class="md-nav__link">
    propagate()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#src.solver.reasoners.sat_reasoner.SATReasoner.explain" class="md-nav__link">
    explain()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  <h1>SAT Reasoner</h1>

<div class="doc doc-object doc-module">




  <div class="doc doc-contents first">
  
      <p>This module defines the "SAT reasoner" (aka "disjunctive reasoner") of the solver.</p>
<p>This reasoner acts like a SAT solver.
It maintains a database of clauses and performs unit propagation.</p>
<p>It is the most "basic" reasoner of the solver and is absolutely required,
as clause learning (for CDCL search) would be simply impossible without it.</p>

  

  <div class="doc doc-children">








<div class="doc doc-object doc-class">




<h5 id="src.solver.reasoners.sat_reasoner.SATReasoner" class="doc doc-heading">
          <span class="doc doc-object-name doc-class-name">SATReasoner</span>


</h5>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">SATReasoner</span><span class="p">(</span><span class="n">state</span><span class="p">:</span> <span class="n">SolverState</span><span class="p">,</span> <span class="n">clause_activity_increase</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">clause_activity_decay</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.999</span><span class="p">,</span> <span class="n">num_allowed_learned_clauses_before_forgetting_first_time</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">,</span> <span class="n">num_allowed_learned_clauses_ratio</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">/</span> <span class="mi">3</span><span class="p">,</span> <span class="n">num_conflicts_allowed_before_database_expansion</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span> <span class="n">database_expansion_ratio</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.05</span><span class="p">,</span> <span class="n">increase_ratio_of_conflicts_before_db_expansion</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.5</span><span class="p">)</span>
</code></pre></div>

  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><a class="autorefs autorefs-internal" title="src.solver.reasoners.reasoner.Reasoner" href="../reasoner/#src.solver.reasoners.reasoner.Reasoner">Reasoner</a></code></p>

  
      <p>Aka "Disjunctive Reasoner". It acts as a SAT solver. It
maintains the database of clauses and performs unit propagation.</p>
<p>In essence, for each clause in the database, we look for distinct 
literals that are not falsified by the current domains:
- If all literals are false, the clause is violated and a conflict
is reported, which will cause the search to backtrack.
- If all but one literal <code>l</code> are false, then the clause is unit
and <code>l</code> is enforced/set.
- Otherwise, two non-false literals are selected and added to a "watch list".
Once one of these literal is set, the clause will be reevaluated.</p>


  

  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">




<h6 id="src.solver.reasoners.sat_reasoner.SATReasoner.clauses_database" class="doc doc-heading">
          <span class="doc doc-object-name doc-attribute-name">clauses_database</span>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">clauses_database</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="n">SATReasoner</span><span class="o">.</span><span class="n">ClauseId</span><span class="p">,</span> <span class="n">SATReasoner</span><span class="o">.</span><span class="n">Clause</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>The clauses database.</p>
  </div>

</div>

<div class="doc doc-object doc-attribute">




<h6 id="src.solver.reasoners.sat_reasoner.SATReasoner.locked_clauses" class="doc doc-heading">
          <span class="doc doc-object-name doc-attribute-name">locked_clauses</span>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">locked_clauses</span><span class="p">:</span> <span class="n">Set</span><span class="p">[</span><span class="n">SATReasoner</span><span class="o">.</span><span class="n">ClauseId</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Contains all locked clauses (locked at all previous decision levels).</p>

<details class="note" open>
  <summary>Note</summary>
  <p>A clause that is marked as locked cannot be removed from the clause
database as part of database rescaling / forgetting of learned clauses.</p>
<p>Marking a clause as locked is necessary when that clause may be needed
for explanation mechanisms.</p>
</details>  </div>

</div>

<div class="doc doc-object doc-attribute">




<h6 id="src.solver.reasoners.sat_reasoner.SATReasoner.locked_clauses_trail" class="doc doc-heading">
          <span class="doc doc-object-name doc-attribute-name">locked_clauses_trail</span>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">locked_clauses_trail</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">SATReasoner</span><span class="o">.</span><span class="n">ClauseId</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[[]]</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Trail of locked clauses. Outer list index: decision level.
Inner list content: clauses locked while at that decision level.</p>
  </div>

</div>

<div class="doc doc-object doc-attribute">




<h6 id="src.solver.reasoners.sat_reasoner.SATReasoner.watches" class="doc doc-heading">
          <span class="doc doc-object-name doc-attribute-name">watches</span>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">watches</span><span class="p">:</span> <span class="n">SetGuardedByLits</span><span class="p">[</span><span class="n">SATReasoner</span><span class="o">.</span><span class="n">ClauseId</span><span class="p">]</span> <span class="o">=</span> <span class="n">SetGuardedByLits</span><span class="p">()</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Represents literals' "watch lists" (lists of clauses where they appear).</p>

<details class="note" open>
  <summary>Note</summary>
  <p>Internally, a literal <code>[signed_var &lt;= val]</code>'s watchlist is represented as:
<code>{ signed_var : { val : [clause1_id, clause2_id, ...] }}</code></p>
</details>  </div>

</div>

<div class="doc doc-object doc-attribute">




<h6 id="src.solver.reasoners.sat_reasoner.SATReasoner.pending_clauses_info" class="doc doc-heading">
          <span class="doc doc-object-name doc-attribute-name">pending_clauses_info</span>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">pending_clauses_info</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="n">SATReasoner</span><span class="o">.</span><span class="n">ClauseId</span><span class="p">,</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Lit</span><span class="p">]]]</span> <span class="o">=</span> <span class="p">[]</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>A queue that stores clauses that have been recorded
into the database, but haven't been processed yet.</p>
<p>The first element of the tuple is the ID of the clause to propagate.</p>
<p>The second element is either None or a literal that is entailed by
the clause at the current decision level. This literal MUST be set
to true, with this clause as its cause, even if the clause is not
unit.</p>
<p>This situation might happen when the clause was learned from
a conflict involving eager propagation of optional variables.</p>
  </div>

</div>

<div class="doc doc-object doc-attribute">




<h6 id="src.solver.reasoners.sat_reasoner.SATReasoner.next_solver_event_to_process_index" class="doc doc-heading">
          <span class="doc doc-object-name doc-attribute-name">next_solver_event_to_process_index</span>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">next_solver_event_to_process_index</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>The index of the next unprocessed (i.e. not yet propagated)
event in <code>SolverState._events_trail</code>.</p>
  </div>

</div>


<div class="doc doc-object doc-class">




<h6 id="src.solver.reasoners.sat_reasoner.SATReasoner.ClauseId" class="doc doc-heading">
          <span class="doc doc-object-name doc-class-name">ClauseId</span>


</h6>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code>int</code></p>

  
      <p>Represents the ID of a clause in the database.</p>


  </div>

</div>

<div class="doc doc-object doc-class">




<h6 id="src.solver.reasoners.sat_reasoner.SATReasoner.Clause" class="doc doc-heading">
          <span class="doc doc-object-name doc-class-name">Clause</span>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">Clause</span><span class="p">(</span><span class="n">literals</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Lit</span><span class="p">,</span> <span class="o">...</span><span class="p">],</span> <span class="n">scope_literal</span><span class="p">:</span> <span class="n">Lit</span><span class="p">,</span> <span class="n">learned</span><span class="p">:</span> <span class="nb">bool</span><span class="p">)</span>
</code></pre></div>

  <div class="doc doc-contents ">

  
      <p>Encapsulates the data of a clause in the clause database.</p>


  

  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">




<h7 id="src.solver.reasoners.sat_reasoner.SATReasoner.Clause.literals" class="doc doc-heading">
          <span class="doc doc-object-name doc-attribute-name">literals</span>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">literals</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Lit</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span> <span class="o">=</span> <span class="n">literals</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>The literals of the clause (without the scope representative literal).</p>
  </div>

</div>

<div class="doc doc-object doc-attribute">




<h7 id="src.solver.reasoners.sat_reasoner.SATReasoner.Clause.scope_representative_literal" class="doc doc-heading">
          <span class="doc doc-object-name doc-attribute-name">scope_representative_literal</span>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">scope_representative_literal</span><span class="p">:</span> <span class="n">Lit</span> <span class="o">=</span> <span class="n">scope_literal</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>The literal representing the scope in which the clause is defined (i.e. the
scope in which all the clauses' literals' variables are present / not absent)</p>

<details class="note" open>
  <summary>Note</summary>
  <p>As such, the true "meaning" of the clause can be expressed with the
following disjunction: <code>!scope_representative_literal | l_1 | ... | l_n</code>.</p>
<p>This also means that a clause whose literals are all false is
only a conflict when we cannot "get out of" its scope (i.e.
enforce its scope representative literal as false).</p>
</details>  </div>

</div>

<div class="doc doc-object doc-attribute">




<h7 id="src.solver.reasoners.sat_reasoner.SATReasoner.Clause.learned" class="doc doc-heading">
          <span class="doc doc-object-name doc-attribute-name">learned</span>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">learned</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">learned</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Whether the clause is learned (i.e. resulting from conflict analysis) or not.</p>
  </div>

</div>

<div class="doc doc-object doc-attribute">




<h7 id="src.solver.reasoners.sat_reasoner.SATReasoner.Clause.activity" class="doc doc-heading">
          <span class="doc doc-object-name doc-attribute-name">activity</span>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">activity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>TODO</p>
  </div>

</div>

<div class="doc doc-object doc-attribute">




<h7 id="src.solver.reasoners.sat_reasoner.SATReasoner.Clause.watch1_index" class="doc doc-heading">
          <span class="doc doc-object-name doc-attribute-name">watch1_index</span>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">watch1_index</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Index of the first watched literal of the clause.</p>
  </div>

</div>

<div class="doc doc-object doc-attribute">




<h7 id="src.solver.reasoners.sat_reasoner.SATReasoner.Clause.watch2_index" class="doc doc-heading">
          <span class="doc doc-object-name doc-attribute-name">watch2_index</span>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">watch2_index</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">len_literals</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="k">else</span> <span class="mi">0</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Index of the second watched literal of the clause.</p>
  </div>

</div>

<div class="doc doc-object doc-attribute">




<h7 id="src.solver.reasoners.sat_reasoner.SATReasoner.Clause.unwatched_indices" class="doc doc-heading">
          <span class="doc doc-object-name doc-attribute-name">unwatched_indices</span>

  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h7>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">unwatched_indices</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">len_literals</span><span class="p">))</span> <span class="k">if</span> <span class="n">len_literals</span> <span class="o">&gt;</span> <span class="mi">2</span> <span class="k">else</span> <span class="p">[]</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>List of the indices of unwatched literals of the clause.</p>
  </div>

</div>





  </div>

  </div>

</div>



<div class="doc doc-object doc-function">




<h6 id="src.solver.reasoners.sat_reasoner.SATReasoner.add_new_fixed_scoped_clause" class="doc doc-heading">
          <span class="doc doc-object-name doc-function-name">add_new_fixed_scoped_clause</span>


</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">add_new_fixed_scoped_clause</span><span class="p">(</span><span class="n">literals</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Lit</span><span class="p">,</span> <span class="o">...</span><span class="p">],</span> <span class="n">scope_representative_literal</span><span class="p">:</span> <span class="n">Lit</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Registers a new non-learned scoped clause to the clauses database
and to the pending clauses queue. A scoped clause is equivalent to 
a non scoped clause <code>!scope_representative_literal | l_1 | ... | l_n</code>.</p>



  <p>Parameters:</p>
  <ul>
      <li class="field-body">
        <b>literals</b>
            (<code><span title="typing.Tuple">Tuple</span>[<a class="autorefs autorefs-internal" title="src.fundamentals.Lit" href="../fundamentals/#src.fundamentals.Lit">Lit</a>, ...]</code>)
        –
        <div class="doc-md-description">
          <p>The literals composing the clause.</p>
        </div>
      </li>
      <li class="field-body">
        <b>scope_representative_literal</b>
            (<code><a class="autorefs autorefs-internal" title="src.fundamentals.Lit" href="../fundamentals/#src.fundamentals.Lit">Lit</a></code>)
        –
        <div class="doc-md-description">
          <p>The literal representing the scope in                 which the clause is defined.</p>
        </div>
      </li>
  </ul>



  <p>Returns:</p>
  <ul>
      <li class="field-body">
            <code>None</code>
        –
        <div class="doc-md-description">
          <p>The ID with which the clause is registered in the clause database.</p>
      </div>
      </li>
  </ul>

  </div>

</div>


<div class="doc doc-object doc-function">




<h6 id="src.solver.reasoners.sat_reasoner.SATReasoner.add_new_learned_non_scoped_clause" class="doc doc-heading">
          <span class="doc doc-object-name doc-function-name">add_new_learned_non_scoped_clause</span>


</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">add_new_learned_non_scoped_clause</span><span class="p">(</span><span class="n">literals</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Lit</span><span class="p">,</span> <span class="o">...</span><span class="p">],</span> <span class="n">asserted_literal</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Lit</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Adds (or "learns") a new learned clause to the clauses database
and to the pending clauses queue.</p>



  <p>Parameters:</p>
  <ul>
      <li class="field-body">
        <b>literals</b>
            (<code><span title="typing.Tuple">Tuple</span>[<a class="autorefs autorefs-internal" title="src.fundamentals.Lit" href="../fundamentals/#src.fundamentals.Lit">Lit</a>, ...]</code>)
        –
        <div class="doc-md-description">
          <p>The literals composing the clause.</p>
        </div>
      </li>
      <li class="field-body">
        <b>asserted_literal</b>
            (<code><span title="typing.Optional">Optional</span>[<a class="autorefs autorefs-internal" title="src.fundamentals.Lit" href="../fundamentals/#src.fundamentals.Lit">Lit</a>]</code>)
        –
        <div class="doc-md-description">
          <p>TODO</p>
        </div>
      </li>
  </ul>



  <p>Returns:</p>
  <ul>
      <li class="field-body">
            <code>None</code>
        –
        <div class="doc-md-description">
          <p>The ID with which the clause is registered in the clause database.</p>
      </div>
      </li>
  </ul>

  </div>

</div>


<div class="doc doc-object doc-function">




<h6 id="src.solver.reasoners.sat_reasoner.SATReasoner.on_solver_increment_decision_level_by_one" class="doc doc-heading">
          <span class="doc doc-object-name doc-function-name">on_solver_increment_decision_level_by_one</span>


</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">on_solver_increment_decision_level_by_one</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>See <code>Reasoner.on_solver_increment_decision_level_by_one</code>.</p>

  </div>

</div>


<div class="doc doc-object doc-function">




<h6 id="src.solver.reasoners.sat_reasoner.SATReasoner.on_solver_backtrack_one_decision_level" class="doc doc-heading">
          <span class="doc doc-object-name doc-function-name">on_solver_backtrack_one_decision_level</span>


</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">on_solver_backtrack_one_decision_level</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>See <code>Reasoner.on_solver_backtrack_one_decision_level</code>.</p>

  </div>

</div>


<div class="doc doc-object doc-function">




<h6 id="src.solver.reasoners.sat_reasoner.SATReasoner.propagate" class="doc doc-heading">
          <span class="doc doc-object-name doc-function-name">propagate</span>


</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">propagate</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ReasonerBaseExplanation</span><span class="p">]</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>Main propagation method of the SAT reasoner.
Performs unit propagation (aka boolean constraint propagation).</p>



  <p>Returns:</p>
  <ul>
      <li class="field-body">
            <code><span title="typing.Optional">Optional</span>[<a class="autorefs autorefs-internal" title="src.solver.common.ReasonerBaseExplanation" href="../common/#src.solver.common.ReasonerBaseExplanation">ReasonerBaseExplanation</a>]</code>
        –
        <div class="doc-md-description">
          <p>A base explanation for a conflict, if one is encountered.                 None if propagation is successful.</p>
      </div>
      </li>
  </ul>

<details class="note" open>
  <summary>Note</summary>
  <p>First, processes all pending clauses (i.e. clauses that were
added to the database since last propagation but weren't processed
yet), and sets their asserted literal to True (if they have one).</p>
<p>If none of these clauses is found to be violated, any
new ("enqueued") "unit information" resulting from
the processing of pending clauses is propagated.</p>
<p>If at any point, either during pending clauses processing or propagation,
a clause is found to be violated, the negation of its literals is
returned as a base explanation to be refined by the main solver.</p>
</details>
  </div>

</div>


<div class="doc doc-object doc-function">




<h6 id="src.solver.reasoners.sat_reasoner.SATReasoner.explain" class="doc doc-heading">
          <span class="doc doc-object-name doc-function-name">explain</span>


</h6>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">explain</span><span class="p">(</span><span class="n">explanation_literals</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Lit</span><span class="p">],</span> <span class="n">literal</span><span class="p">:</span> <span class="n">Lit</span><span class="p">,</span> <span class="n">inference_cause</span><span class="p">:</span> <span class="n">Causes</span><span class="o">.</span><span class="n">ReasonerInference</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

  <div class="doc doc-contents ">
  
      <p>See <code>Reasoner.explain</code>.</p>

  </div>

</div>



  </div>

  </div>

</div>




  </div>

  </div>

</div>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.dfff1995.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.dff1b7c8.min.js"></script>
      
    
  </body>
</html>